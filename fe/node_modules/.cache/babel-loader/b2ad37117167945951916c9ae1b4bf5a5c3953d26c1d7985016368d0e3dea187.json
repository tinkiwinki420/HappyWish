{"ast":null,"code":"export const handleBooking = ({\n  timeSlot,\n  selectedMeal,\n  category,\n  numOfPeople,\n  userId,\n  selectedDate,\n  totalPrice,\n  advancePayment,\n  closeForm\n}) => {\n  if (!timeSlot) {\n    alert(\"Please select a time slot before booking.\");\n    return;\n  }\n  const remainingBalance = (totalPrice - advancePayment).toFixed(2);\n  let bookingDetails = {\n    business_id: userId,\n    user_id: localStorage.getItem(\"userId\"),\n    date: selectedDate.toISOString().split(\"T\")[0],\n    time_slot: timeSlot,\n    num_of_people: category === \"Hall\" ? numOfPeople : null,\n    total_price: totalPrice,\n    advance_payment: advancePayment,\n    remaining_balance: remainingBalance\n  };\n  if (category === \"Hall\" && selectedMeal) {\n    bookingDetails = {\n      ...bookingDetails,\n      meal_name: selectedMeal.name,\n      meal_price: selectedMeal.price,\n      meal_image: `/uploads/${selectedMeal.image}`\n    };\n  }\n  fetch(`/api/profile/business/bookings/regular`, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify(bookingDetails)\n  }).then(response => response.json()).then(data => {\n    if (data.message === \"Booking created successfully\") {\n      alert(\"Booking successfully created!\");\n      closeForm();\n    } else {\n      alert(data.message);\n    }\n  }).catch(error => {\n    console.error(\"Error storing date selection:\", error.message);\n    alert(\"Error storing date selection. Please try again later.\");\n  });\n};","map":{"version":3,"names":["handleBooking","timeSlot","selectedMeal","category","numOfPeople","userId","selectedDate","totalPrice","advancePayment","closeForm","alert","remainingBalance","toFixed","bookingDetails","business_id","user_id","localStorage","getItem","date","toISOString","split","time_slot","num_of_people","total_price","advance_payment","remaining_balance","meal_name","name","meal_price","price","meal_image","image","fetch","method","headers","body","JSON","stringify","then","response","json","data","message","catch","error","console"],"sources":["C:/Users/Admin/Downloads/React_Node_Sql_Path2-main/React_Node_Sql_Path2-main/fe/src/components/Dates/handlers/handleBooking.js"],"sourcesContent":["export const handleBooking = ({\n    timeSlot,\n    selectedMeal,\n    category,\n    numOfPeople,\n    userId,\n    selectedDate,\n    totalPrice,\n    advancePayment,\n    closeForm,\n  }) => {\n    if (!timeSlot) {\n      alert(\"Please select a time slot before booking.\");\n      return;\n    }\n  \n    const remainingBalance = (totalPrice - advancePayment).toFixed(2);\n    let bookingDetails = {\n      business_id: userId,\n      user_id: localStorage.getItem(\"userId\"),\n      date: selectedDate.toISOString().split(\"T\")[0],\n      time_slot: timeSlot,\n      num_of_people: category === \"Hall\" ? numOfPeople : null,\n      total_price: totalPrice,\n      advance_payment: advancePayment,\n      remaining_balance: remainingBalance,\n    };\n  \n    if (category === \"Hall\" && selectedMeal) {\n      bookingDetails = {\n        ...bookingDetails,\n        meal_name: selectedMeal.name,\n        meal_price: selectedMeal.price,\n        meal_image: `/uploads/${selectedMeal.image}`,\n      };\n    }\n  \n    fetch(`/api/profile/business/bookings/regular`, {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify(bookingDetails),\n    })\n      .then((response) => response.json())\n      .then((data) => {\n        if (data.message === \"Booking created successfully\") {\n          alert(\"Booking successfully created!\");\n          closeForm();\n        } else {\n          alert(data.message);\n        }\n      })\n      .catch((error) => {\n        console.error(\"Error storing date selection:\", error.message);\n        alert(\"Error storing date selection. Please try again later.\");\n      });\n  };\n  "],"mappings":"AAAA,OAAO,MAAMA,aAAa,GAAGA,CAAC;EAC1BC,QAAQ;EACRC,YAAY;EACZC,QAAQ;EACRC,WAAW;EACXC,MAAM;EACNC,YAAY;EACZC,UAAU;EACVC,cAAc;EACdC;AACF,CAAC,KAAK;EACJ,IAAI,CAACR,QAAQ,EAAE;IACbS,KAAK,CAAC,2CAA2C,CAAC;IAClD;EACF;EAEA,MAAMC,gBAAgB,GAAG,CAACJ,UAAU,GAAGC,cAAc,EAAEI,OAAO,CAAC,CAAC,CAAC;EACjE,IAAIC,cAAc,GAAG;IACnBC,WAAW,EAAET,MAAM;IACnBU,OAAO,EAAEC,YAAY,CAACC,OAAO,CAAC,QAAQ,CAAC;IACvCC,IAAI,EAAEZ,YAAY,CAACa,WAAW,CAAC,CAAC,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;IAC9CC,SAAS,EAAEpB,QAAQ;IACnBqB,aAAa,EAAEnB,QAAQ,KAAK,MAAM,GAAGC,WAAW,GAAG,IAAI;IACvDmB,WAAW,EAAEhB,UAAU;IACvBiB,eAAe,EAAEhB,cAAc;IAC/BiB,iBAAiB,EAAEd;EACrB,CAAC;EAED,IAAIR,QAAQ,KAAK,MAAM,IAAID,YAAY,EAAE;IACvCW,cAAc,GAAG;MACf,GAAGA,cAAc;MACjBa,SAAS,EAAExB,YAAY,CAACyB,IAAI;MAC5BC,UAAU,EAAE1B,YAAY,CAAC2B,KAAK;MAC9BC,UAAU,EAAG,YAAW5B,YAAY,CAAC6B,KAAM;IAC7C,CAAC;EACH;EAEAC,KAAK,CAAE,wCAAuC,EAAE;IAC9CC,MAAM,EAAE,MAAM;IACdC,OAAO,EAAE;MAAE,cAAc,EAAE;IAAmB,CAAC;IAC/CC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACxB,cAAc;EACrC,CAAC,CAAC,CACCyB,IAAI,CAAEC,QAAQ,IAAKA,QAAQ,CAACC,IAAI,CAAC,CAAC,CAAC,CACnCF,IAAI,CAAEG,IAAI,IAAK;IACd,IAAIA,IAAI,CAACC,OAAO,KAAK,8BAA8B,EAAE;MACnDhC,KAAK,CAAC,+BAA+B,CAAC;MACtCD,SAAS,CAAC,CAAC;IACb,CAAC,MAAM;MACLC,KAAK,CAAC+B,IAAI,CAACC,OAAO,CAAC;IACrB;EACF,CAAC,CAAC,CACDC,KAAK,CAAEC,KAAK,IAAK;IAChBC,OAAO,CAACD,KAAK,CAAC,+BAA+B,EAAEA,KAAK,CAACF,OAAO,CAAC;IAC7DhC,KAAK,CAAC,uDAAuD,CAAC;EAChE,CAAC,CAAC;AACN,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}