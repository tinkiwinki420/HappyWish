{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Admin\\\\Downloads\\\\React_Node_Sql_Path2-main\\\\React_Node_Sql_Path2-main\\\\fe\\\\src\\\\pages\\\\MainPage.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { API_URL } from '../constans.js';\nimport { Link } from 'react-router-dom';\nimport './pages.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction MainPage() {\n  _s();\n  const [dataArray, setDataArray] = useState([]);\n  const [message, setMessage] = useState({}); //msg from DB\n\n  //fetch posts\n  const fetchData = async () => {\n    try {\n      const res = await axios.get(`/posts`);\n      setDataArray(res.data);\n      console.log(res.data);\n    } catch (err) {\n      console.log(err);\n    }\n  };\n  useEffect(() => {\n    fetchData();\n  }, []);\n  const handleDeletePost = post => {\n    if (window.confirm('Are you sure delete this post?')) {\n      deletePost(post.post_id);\n    }\n  };\n  const deletePost = async post_id => {\n    axios.delete(`/deletepost/${post_id}`).then(res => {\n      const msg = {\n        msgClass: res.status === 200 ? 'success' : 'error',\n        text: res.status === 200 ? 'Article deleted successfully!' : 'Error delete article'\n      };\n      setMessage(msg);\n      // Clear the message after 2 seconds\n      setTimeout(() => {\n        setMessage('');\n      }, 2000);\n      fetchData();\n      // navigate('/');\n    }).catch(error => {\n      console.error('Error delete article', error);\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"post__btns mt4\",\n        children: /*#__PURE__*/_jsxDEV(Link, {\n          to: \"newpost\",\n          children: \"new Post\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 5\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 4\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"posts mt4\",\n        children: dataArray && dataArray.map((elem, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"post-prev\",\n          children: [/*#__PURE__*/_jsxDEV(Link, {\n            to: `/post/${elem.post_id}`,\n            state: {\n              post: elem\n            },\n            className: `art__item d-flex mt4 g2 ${i % 2 === 0 && 'f-reverce'}`,\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: `${API_URL}/${elem.post_img}`,\n              alt: \"art_icon\",\n              className: \"art__icon\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 67,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text\",\n              children: /*#__PURE__*/_jsxDEV(\"h2\", {\n                className: \"mb2\",\n                children: elem.post_title\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 69,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 68,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleDeletePost(elem),\n            children: \"Delete post\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"msg_block\",\n            children: message ? /*#__PURE__*/_jsxDEV(\"span\", {\n              className: message.msgClass,\n              children: message.text\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 77,\n              columnNumber: 18\n            }, this) : /*#__PURE__*/_jsxDEV(\"span\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 77,\n              columnNumber: 77\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 6\n          }, this)]\n        }, 'art-' + i, true, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 4\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 3\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 3\n  }, this);\n}\n_s(MainPage, \"oXPfAZ4el3gm9MYItBFdD+rDMOE=\");\n_c = MainPage;\nexport default MainPage;\nvar _c;\n$RefreshReg$(_c, \"MainPage\");","map":{"version":3,"names":["React","useState","useEffect","axios","API_URL","Link","jsxDEV","_jsxDEV","MainPage","_s","dataArray","setDataArray","message","setMessage","fetchData","res","get","data","console","log","err","handleDeletePost","post","window","confirm","deletePost","post_id","delete","then","msg","msgClass","status","text","setTimeout","catch","error","children","className","to","fileName","_jsxFileName","lineNumber","columnNumber","map","elem","i","state","src","post_img","alt","post_title","onClick","_c","$RefreshReg$"],"sources":["C:/Users/Admin/Downloads/React_Node_Sql_Path2-main/React_Node_Sql_Path2-main/fe/src/pages/MainPage.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\n\r\nimport axios from 'axios';\r\nimport { API_URL } from '../constans.js';\r\nimport { Link } from 'react-router-dom';\r\nimport './pages.css'\r\n\r\n\r\n\r\nfunction MainPage() {\r\n\tconst [dataArray, setDataArray] = useState([]);\r\n\tconst [message, setMessage] = useState({}); //msg from DB\r\n\r\n\t //fetch posts\r\n\tconst fetchData = async () => {\r\n\t\ttry {\r\n\t\t\tconst res = await axios.get(`/posts`);\r\n\t\t\tsetDataArray(res.data);\r\n\t\t\tconsole.log(res.data);\r\n\t\t} catch (err) {\r\n\t\t\tconsole.log(err);\r\n\t\t}\r\n\t};\r\n\tuseEffect(() => {\r\n\t\tfetchData();\r\n\t}, []);\r\n\tconst handleDeletePost = (post) => {\r\n\t\tif (window.confirm('Are you sure delete this post?')) {\r\n\t\t  deletePost(post.post_id);\r\n\t\t}\r\n\t };\r\n\tconst deletePost = async (post_id) => {\r\n\t\taxios\r\n\t\t\t.delete(`/deletepost/${post_id}`)\r\n\t\t\t.then((res) => {\r\n\t\t\t\tconst msg = {\r\n\t\t\t\tmsgClass: res.status === 200 ? 'success' : 'error',\r\n\t\t\t\ttext: res.status === 200 ? 'Article deleted successfully!' : 'Error delete article',\r\n\t\t\t\t};\r\n\t\t\t\tsetMessage(msg);\r\n\t\t\t\t// Clear the message after 2 seconds\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tsetMessage('');\r\n\t\t\t\t}, 2000);\r\n\t\t\t\tfetchData();\r\n\t\t\t\t// navigate('/');\r\n\t\t\t})\r\n\t\t\t.catch((error) => {\r\n\t\t\t\tconsole.error('Error delete article', error);\r\n\t\t\t});\r\n\t};\r\n  return (\r\n\t <div>\r\n\t\t<div className=\"container\">\r\n\t\t\t<div className=\"post__btns mt4\">\r\n\t\t\t\t<Link to=\"newpost\">new Post</Link>\r\n\t\t\t</div>\r\n\t\t\t\r\n\t\t\t<div className=\"posts mt4\">\r\n\t\t\t{dataArray &&\r\n            dataArray.map((elem, i) => (\r\n              <div key={'art-' + i} className='post-prev'>\r\n                <Link\r\n                  to={`/post/${elem.post_id}`}\r\n                  state={{ post: elem }}\r\n                  className={`art__item d-flex mt4 g2 ${i % 2 === 0 && 'f-reverce'}`}>\r\n                  <img src={`${API_URL}/${elem.post_img}`} alt='art_icon' className='art__icon' />\r\n                  <div className='text'>\r\n                    <h2 className='mb2'>{elem.post_title}</h2>\r\n                  </div>\r\n\t\t\t\t\t\t\r\n                </Link>\r\n\t\t\t\t\t <button onClick={() => handleDeletePost(elem)}>\r\n\t\t\t\t\t\tDelete post\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t<div className='msg_block'>\r\n\t\t\t\t\t\t{message ? <span className={message.msgClass}>{message.text}</span> : <span></span>}\r\n\t\t\t\t\t</div>\r\n              </div>\r\n            ))}\r\n\t\t\t</div>\r\n\t\t\r\n\t\t</div>\r\n\t </div>\r\n  )\r\n}\r\n\r\nexport default MainPage\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}