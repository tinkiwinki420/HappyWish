{"ast":null,"code":"export const handleSelectSlot = ({\n  start,\n  userType,\n  setSelectedDate,\n  setBookingStatus,\n  setShowModal,\n  userId\n}) => {\n  const now = new Date();\n  if (userType === \"business\") {\n    alert(\"Business users cannot book dates.\");\n    return;\n  }\n  if (!userType) {\n    alert(\"You have to sign in first to book a date!\");\n    return;\n  }\n  if (start <= now) {\n    alert(\"Please select a future date.\");\n    return;\n  }\n  setSelectedDate(start);\n  const selectedDateString = start.toISOString().split(\"T\")[0];\n  fetch(`/api/profile/business/bookings/check/${userId}/${selectedDateString}`).then(response => response.json()).then(data => {\n    if (!Array.isArray(data.bookedSlots)) {\n      console.error(\"Invalid response:\", data);\n      return;\n    }\n    setBookingStatus(data.bookedSlots);\n    const dayBooking = data.bookedSlots.some(booking => booking.time_slot === \"day\");\n    const nightBooking = data.bookedSlots.some(booking => booking.time_slot === \"night\");\n    if (dayBooking && nightBooking) {\n      alert(\"This date is fully booked.\");\n    } else {\n      setShowModal(true);\n    }\n  }).catch(error => {\n    console.error(\"Error checking booking status:\", error.message);\n    alert(\"Error checking booking status. Please try again later.\");\n  });\n};","map":{"version":3,"names":["handleSelectSlot","start","userType","setSelectedDate","setBookingStatus","setShowModal","userId","now","Date","alert","selectedDateString","toISOString","split","fetch","then","response","json","data","Array","isArray","bookedSlots","console","error","dayBooking","some","booking","time_slot","nightBooking","catch","message"],"sources":["C:/Users/Admin/Downloads/React_Node_Sql_Path2-main/React_Node_Sql_Path2-main/fe/src/components/Dates/handlers/handleSelectSlot.js"],"sourcesContent":["export const handleSelectSlot = ({\n    start,\n    userType,\n    setSelectedDate,\n    setBookingStatus,\n    setShowModal,\n    userId,\n  }) => {\n    const now = new Date();\n    if (userType === \"business\") {\n      alert(\"Business users cannot book dates.\");\n      return;\n    }\n    if (!userType) {\n      alert(\"You have to sign in first to book a date!\");\n      return;\n    }\n    if (start <= now) {\n      alert(\"Please select a future date.\");\n      return;\n    }\n    setSelectedDate(start);\n    const selectedDateString = start.toISOString().split(\"T\")[0];\n  \n    fetch(`/api/profile/business/bookings/check/${userId}/${selectedDateString}`)\n      .then((response) => response.json())\n      .then((data) => {\n        if (!Array.isArray(data.bookedSlots)) {\n          console.error(\"Invalid response:\", data);\n          return;\n        }\n        setBookingStatus(data.bookedSlots);\n        const dayBooking = data.bookedSlots.some(\n          (booking) => booking.time_slot === \"day\"\n        );\n        const nightBooking = data.bookedSlots.some(\n          (booking) => booking.time_slot === \"night\"\n        );\n  \n        if (dayBooking && nightBooking) {\n          alert(\"This date is fully booked.\");\n        } else {\n          setShowModal(true);\n        }\n      })\n      .catch((error) => {\n        console.error(\"Error checking booking status:\", error.message);\n        alert(\"Error checking booking status. Please try again later.\");\n      });\n  };\n  "],"mappings":"AAAA,OAAO,MAAMA,gBAAgB,GAAGA,CAAC;EAC7BC,KAAK;EACLC,QAAQ;EACRC,eAAe;EACfC,gBAAgB;EAChBC,YAAY;EACZC;AACF,CAAC,KAAK;EACJ,MAAMC,GAAG,GAAG,IAAIC,IAAI,CAAC,CAAC;EACtB,IAAIN,QAAQ,KAAK,UAAU,EAAE;IAC3BO,KAAK,CAAC,mCAAmC,CAAC;IAC1C;EACF;EACA,IAAI,CAACP,QAAQ,EAAE;IACbO,KAAK,CAAC,2CAA2C,CAAC;IAClD;EACF;EACA,IAAIR,KAAK,IAAIM,GAAG,EAAE;IAChBE,KAAK,CAAC,8BAA8B,CAAC;IACrC;EACF;EACAN,eAAe,CAACF,KAAK,CAAC;EACtB,MAAMS,kBAAkB,GAAGT,KAAK,CAACU,WAAW,CAAC,CAAC,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;EAE5DC,KAAK,CAAE,wCAAuCP,MAAO,IAAGI,kBAAmB,EAAC,CAAC,CAC1EI,IAAI,CAAEC,QAAQ,IAAKA,QAAQ,CAACC,IAAI,CAAC,CAAC,CAAC,CACnCF,IAAI,CAAEG,IAAI,IAAK;IACd,IAAI,CAACC,KAAK,CAACC,OAAO,CAACF,IAAI,CAACG,WAAW,CAAC,EAAE;MACpCC,OAAO,CAACC,KAAK,CAAC,mBAAmB,EAAEL,IAAI,CAAC;MACxC;IACF;IACAb,gBAAgB,CAACa,IAAI,CAACG,WAAW,CAAC;IAClC,MAAMG,UAAU,GAAGN,IAAI,CAACG,WAAW,CAACI,IAAI,CACrCC,OAAO,IAAKA,OAAO,CAACC,SAAS,KAAK,KACrC,CAAC;IACD,MAAMC,YAAY,GAAGV,IAAI,CAACG,WAAW,CAACI,IAAI,CACvCC,OAAO,IAAKA,OAAO,CAACC,SAAS,KAAK,OACrC,CAAC;IAED,IAAIH,UAAU,IAAII,YAAY,EAAE;MAC9BlB,KAAK,CAAC,4BAA4B,CAAC;IACrC,CAAC,MAAM;MACLJ,YAAY,CAAC,IAAI,CAAC;IACpB;EACF,CAAC,CAAC,CACDuB,KAAK,CAAEN,KAAK,IAAK;IAChBD,OAAO,CAACC,KAAK,CAAC,gCAAgC,EAAEA,KAAK,CAACO,OAAO,CAAC;IAC9DpB,KAAK,CAAC,wDAAwD,CAAC;EACjE,CAAC,CAAC;AACN,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}